## Скрипт для экспорта данных из ICQ
<details>

  <summary>Получение данных</summary>

Скрипт выгружает данные используя web api icq. Документации по api нет, эндпоинты были выдраны из логов браузера и автоматизированны опытным путем.
Текст выгружается в формате json пачками по 50 сообщений, реализована выгрузка файлов. Все данные из чатов сохраняются в папку [results](results) с именем контакта или группы.
Скрипт не имеет функционала для представления данных.

### Запуск:
Активировать venv и установить зависимости
```bash
pip install -r requirements.txt
```

1. Зайти в бразуер (тестировался Chrome) на сайт  [https://web.icq.com/](https://web.icq.com/)
2. Если уже авторизованы, нужно выйти и перезагрузить страницу
2. Нажать F12, поставить галочку "Preserve log", чтобы лог не затирался при перезагрузке страницы
![img1.png](instructions%2Fimg1.png)
3. Авторизироваться и выбрать любой чат (это важно для записи логов)
4. Сохранить дапм "Export HAR" с именем "web.icq.com.har" в корневую папку со скриптом
![img2.png](instructions%2Fimg2.png)
5. Запустить скрипт получения данных пользователя и контактов
```bash
python get_user_data.py
```
Данные сохраняются в [user_data](user_data)

6. При необходимости можно выбрать, какие чаты бэкапить. Для этого нужно удалить лишние строки в файле [filter.txt](user_data%2Ffilter.txt). Файл сформируется после выполнения пункта 5.

7. Запустить получение истории сообщений
```bash
python history_to_json.py
```
Данные сохраняются в [results](results) в папке с имененем чата. В имени чата заменяются символы, запрещенные для имен папок windows.

8. Запустить получение файлов из сообщений
```bash
python download_files.py
```
Файлы сохраняются в папки files. Некоторы файлы могут отсутвовать на сервере. Имена файлов соответсвуют именам в сообщениях.
 </details> 


<details>
  <summary>Импорт данных в Телеграм</summary>
  Есть возможность импортировать чат в телеграм, но только если у вас есть Iphone и скачены json файлы.
  Имена берутся из файла контактов. Импортируются текст и картинки (видео и файлы не переносятся). 

  Необходимо:
  1. Установить зависимости
  2. Запустить файл [icq_to_whatsapp.py](whatsapp_like%2Ficq_to_whatsapp.py)
  3. Указать имя папки и тип чата
  4. Скопировать получившийся архив zip в память телефона
  5. В телефоне нажать поделиться и выбрать телеграм
  6. Создать новый чать и экспортировать данные
  
  
</details> 
